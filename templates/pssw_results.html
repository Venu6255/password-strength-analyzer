{% extends "pssw_base.html" %}

{% block title %}Analysis Results - Password Analyzer Pro{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold text-primary">
                    <i class="bi bi-graph-up me-3"></i>Analysis Results
                </h1>
                <p class="lead text-muted">Comprehensive password security analysis and recommendations</p>
            </div>

            <!-- Main Results Card -->
            <div class="card shadow-lg border-0 mb-4">
                <div class="card-header bg-primary text-white py-3">
                    <h4 class="card-title mb-0">
                        <i class="bi bi-shield-check me-2"></i>Password Strength Assessment
                    </h4>
                </div>
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="text-center mb-4">
                                <div class="strength-circle mx-auto mb-3">
                                    <div class="circle-progress" data-percentage="0">
                                        <span class="percentage">0%</span>
                                    </div>
                                </div>
                                <h5 id="overallStrength" class="fw-bold">Very Weak</h5>
                                <p class="text-muted mb-0">Overall Strength</p>
                            </div>
                        </div>
                        
                        <div class="col-md-8">
                            <div class="row">
                                <div class="col-sm-6 mb-3">
                                    <div class="metric-card">
                                        <div class="metric-icon">
                                            <i class="bi bi-rulers"></i>
                                        </div>
                                        <div class="metric-content">
                                            <div id="passwordLength" class="metric-value">0</div>
                                            <div class="metric-label">Characters</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-sm-6 mb-3">
                                    <div class="metric-card">
                                        <div class="metric-icon">
                                            <i class="bi bi-speedometer2"></i>
                                        </div>
                                        <div class="metric-content">
                                            <div id="entropyScore" class="metric-value">0</div>
                                            <div class="metric-label">Entropy Bits</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-sm-6 mb-3">
                                    <div class="metric-card">
                                        <div class="metric-icon">
                                            <i class="bi bi-clock"></i>
                                        </div>
                                        <div class="metric-content">
                                            <div id="crackTime" class="metric-value">0s</div>
                                            <div class="metric-label">Crack Time</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-sm-6 mb-3">
                                    <div class="metric-card">
                                        <div class="metric-icon">
                                            <i class="bi bi-puzzle"></i>
                                        </div>
                                        <div class="metric-content">
                                            <div id="uniqueChars" class="metric-value">0</div>
                                            <div class="metric-label">Unique Chars</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Character Analysis -->
            <div class="card shadow-lg border-0 mb-4">
                <div class="card-header bg-info text-white py-3">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-alphabet-uppercase me-2"></i>Character Composition Analysis
                    </h5>
                </div>
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="character-types mb-4">
                                <div class="char-type-item" id="lowercaseChar">
                                    <div class="char-type-icon">
                                        <i class="bi bi-check-circle-fill"></i>
                                    </div>
                                    <div class="char-type-content">
                                        <span class="char-type-label">Lowercase Letters</span>
                                        <span class="char-type-count">0</span>
                                    </div>
                                </div>
                                
                                <div class="char-type-item" id="uppercaseChar">
                                    <div class="char-type-icon">
                                        <i class="bi bi-check-circle-fill"></i>
                                    </div>
                                    <div class="char-type-content">
                                        <span class="char-type-label">Uppercase Letters</span>
                                        <span class="char-type-count">0</span>
                                    </div>
                                </div>
                                
                                <div class="char-type-item" id="digitChar">
                                    <div class="char-type-icon">
                                        <i class="bi bi-check-circle-fill"></i>
                                    </div>
                                    <div class="char-type-content">
                                        <span class="char-type-label">Numbers</span>
                                        <span class="char-type-count">0</span>
                                    </div>
                                </div>
                                
                                <div class="char-type-item" id="specialChar">
                                    <div class="char-type-icon">
                                        <i class="bi bi-check-circle-fill"></i>
                                    </div>
                                    <div class="char-type-content">
                                        <span class="char-type-label">Special Characters</span>
                                        <span class="char-type-count">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="diversity-chart">
                                <h6 class="fw-semibold mb-3">Character Diversity</h6>
                                <div class="progress mb-2" style="height: 20px;">
                                    <div id="diversityBar" class="progress-bar bg-gradient" role="progressbar" 
                                         style="width: 0%"></div>
                                </div>
                                <p class="small text-muted mb-0">
                                    <span id="diversityPercentage">0%</span> character diversity
                                    <br>
                                    <span id="diversityDescription">Low diversity reduces security</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pattern Analysis -->
            <div class="card shadow-lg border-0 mb-4">
                <div class="card-header bg-warning text-dark py-3">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-pattern me-2"></i>Pattern & Vulnerability Analysis
                    </h5>
                </div>
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="fw-semibold text-danger mb-3">Detected Issues</h6>
                            <div id="patternIssues" class="pattern-issues">
                                <!-- Issues will be populated here -->
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <h6 class="fw-semibold text-success mb-3">Positive Attributes</h6>
                            <div id="patternStrengths" class="pattern-strengths">
                                <!-- Strengths will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recommendations -->
            <div class="card shadow-lg border-0 mb-4">
                <div class="card-header bg-success text-white py-3">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-lightbulb me-2"></i>Security Recommendations
                    </h5>
                </div>
                <div class="card-body p-4">
                    <div id="recommendations" class="recommendations-list">
                        <!-- Recommendations will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Additional Analysis (zxcvbn) -->
            <div class="card shadow-lg border-0 mb-4" id="zxcvbnCard" style="display: none;">
                <div class="card-header bg-secondary text-white py-3">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-cpu me-2"></i>Advanced Analysis (zxcvbn)
                    </h5>
                </div>
                <div class="card-body p-4">
                    <div id="zxcvbnContent">
                        <!-- zxcvbn analysis content -->
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="text-center">
                <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg me-3">
                    <i class="bi bi-arrow-left me-2"></i>Analyze Another Password
                </a>
                <button class="btn btn-outline-secondary btn-lg" onclick="window.print()">
                    <i class="bi bi-printer me-2"></i>Print Report
                </button>
            </div>
        </div>
    </div>
</div>

<style>
.strength-circle {
    width: 120px;
    height: 120px;
}

.circle-progress {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: conic-gradient(#28a745 0deg, #28a745 0deg, #e9ecef 0deg);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.circle-progress::before {
    content: '';
    position: absolute;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: white;
}

.percentage {
    font-size: 1.2rem;
    font-weight: bold;
    z-index: 1;
}

.metric-card {
    display: flex;
    align-items: center;
    padding: 1rem;
    border: 1px solid #e9ecef;
    border-radius: 0.375rem;
    background: white;
    height: 100%;
}

.metric-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(45deg, #007bff, #0056b3);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
    margin-right: 1rem;
}

.metric-value {
    font-size: 1.5rem;
    font-weight: bold;
    color: #333;
}

.metric-label {
    font-size: 0.875rem;
    color: #6c757d;
    margin-top: 0.25rem;
}

.char-type-item {
    display: flex;
    align-items: center;
    padding: 0.75rem 0;
    border-bottom: 1px solid #f8f9fa;
}

.char-type-icon {
    margin-right: 1rem;
    font-size: 1.25rem;
}

.char-type-item.active .char-type-icon {
    color: #28a745;
}

.char-type-item.inactive .char-type-icon {
    color: #dc3545;
}

.char-type-content {
    flex: 1;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.char-type-count {
    background: #f8f9fa;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-weight: bold;
    font-size: 0.875rem;
}

.pattern-issues .issue-item,
.pattern-strengths .strength-item {
    padding: 0.5rem 0;
    border-bottom: 1px solid #f8f9fa;
}

.issue-item {
    color: #dc3545;
}

.strength-item {
    color: #28a745;
}

.recommendations-list .recommendation-item {
    padding: 1rem;
    margin-bottom: 0.75rem;
    background: #f8f9fa;
    border-left: 4px solid #007bff;
    border-radius: 0.25rem;
}

@media print {
    .btn, .card-header {
        print-color-adjust: exact;
        -webkit-print-color-adjust: exact;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
// This would be populated with analysis data from the main page
// For now, it's a placeholder for the results display functionality
</script>
{% endblock %}